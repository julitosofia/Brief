{% extends "base.html" %}
{% block title %}Editar Brief{% endblock %}

{% block content %}
<div class="container" style="max-width: 900px;">

  <div class="card" style="margin-bottom: 30px; background-color: var(--color-accent);">
    <h1 style="margin: 0; font-size: 3rem;">{{ proyecto.nombre }}</h1>
    <p style="font-weight: 800; text-transform: uppercase; margin-top: 10px; color: var(--color-dark);">
      Editor de Brief / <span style="opacity: 0.7;">Revisión de Secciones</span>
    </p>
  </div>

  <form method="POST">
    {% for brief in briefs %}
      <div class="card brief-section">
        
        <h3 style="font-size: 1.5rem; margin-bottom: 20px; border-left: 8px solid var(--color-dark); padding-left: 15px;">
          {{ brief.seccion }}
        </h3>

        {% if brief.estado == "observado" and brief.comentarios %}
          <div class="alert-observation">
            <strong>⚠️ Observación del equipo Data:</strong>
            <p style="margin: 0; font-weight: 600;">
              {{ brief.comentarios[-1].comentario }}
            </p>
          </div>
        {% endif %}

        <div class="form-group" style="margin-bottom: 0;">
          <label>Tu respuesta</label>
          {% if "Plazos" in brief.seccion or "Entrega" in brief.seccion %}
            <input
              type="date"
              name="seccion_{{ brief.id }}"
              value="{{ brief.respuesta }}"
              required
            >
          {% else %}
            <textarea
              name="seccion_{{ brief.id }}"
              rows="5"
              placeholder="Describa los detalles aquí..."
              style="resize: vertical;"
            >{{ brief.respuesta or "" }}</textarea>
          {% endif %}
        </div>
      </div>
    {% endfor %}

    <div class="card" style="display: flex; gap: 20px; align-items: center; justify-content: space-between; background: var(--color-dark); color: white;">
      <div style="display: flex; gap: 20px; align-items: center;">
        <button type="submit" class="btn-primary">
          Enviar a revisión →
        </button>
        
        <a href="{{ url_for('campo.dashboard') }}" class="btn-cancel" style="color: white;">
          Volver al panel
        </a>
      </div>
      
      <p style="font-size: 0.7rem; text-transform: uppercase; font-weight: 800; margin: 0; opacity: 0.6;">
        Asegúrate de responder todas las secciones observadas.
      </p>
    </div>

  </form>
</div>
{% endblock %}




